{%- liquid
  assign theme_st = settings
  if scope != 'detail'
    assign target = product.variants[0]
  else
    assign target = product.selected_or_first_available_variant
  endif
  assign compare_at_price = target.compare_at_price
  assign price = target.price | default: 1999

  assign money_price = price | money
  if theme_st.show_currency_code
    assign money_price = price | money_with_currency
  endif
  if target == product and product.price_varies
    assign money_price = 'products.product.price.from_price_html' | t: price: money_price
  endif
  assign special_class = ''
  if compare_at_price > price
    assign special_class = 'price--special'
  endif
-%}

<div class="card-product-price {{ class }} flex align-center flex-wrap gap-5 relative">
  {%- if compare_at_price > price -%}

    <div class="price-regular">
      <span class="visually-hidden">
        {{- 'products.product.price.regular_price' | t -}}
      </span>
      <s class="price-item compare-price dark-grey">
        {%- if theme_st.show_currency_code -%}
          {{ compare_at_price | money_with_currency }}
        {%- else -%}
          {{ compare_at_price | money }}
        {%- endif -%}
      </s>
    </div>

    <div class="price-regular primary-color">
      <span class="visually-hidden">{{ 'products.product.price.sale_price' | t }}</span>
      <span class="price heading_weight primary-color price-same-style {{ special_class }}">
        {{ money_price }}
      </span>
    </div>
    {% if template.name == 'product' and product %}
      <div
        class="sale_badge sale_badge--inside-price"
        data-sale-color="#fff"
        data-sold-out-color="#fff"
        data-pre-order-color="#fff"
        data-sale-bg="#D0473E"
        data-sold-out-bg="#666666"
        data-pre-order-bg="#6a33d8"
      >
        <div
          class="product__badges fs-small flex flex-column flex-wrap gap-custom"
          style="--gap: 3;"
          data-sale-color="#fff"
          data-sold-out-color="#fff"
          data-pre-order-color="#fff"
          data-sale-bg="#D0473E"
          data-sold-out-bg="#666666"
          data-pre-order-bg="#6a33d8"
          data-show-sale="true"
          data-show-sold-out="true"
          data-show-preorder="true"
          data-sale-badge-type="percent"
        >
          {%- assign discount_percent = compare_at_price | minus: price | times: 100 | divided_by: compare_at_price -%}
          <div
            class="product__badges-sale product__badges-type-percent product__badges-inner align-self-start px-15 sale inline-flex content-center subheading_weight text-center lh-normal"
            style="--badges-color: #fff;--badges-bg:#D0473E;"
          >
            {{ discount_percent }}% OFF
          </div>
        </div>
      </div>
    {% endif %}


  {%- else -%}
    <div class="price-regular">
      <span class="visually-hidden">
        {{- 'products.product.price.regular_price' | t -}}
      </span>
      <span class="price price-same-style heading-style">
        {{ money_price }}
      </span>
    </div>
  {%- endif -%}
  <div class="installment-payment">
    {% if template.name == 'product' and product %}
      <p>
        <svg width="1.37em" height="1.37em" display="inline-block" fill="currentColor" fill-rule="evenodd" style="vertical-align:text-bottom" aria-hidden="true" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
        <path d="m190.82 24.773c-8.443 1.63-13.959 3.86-20.931 8.462-3.409 2.25-74.576 72.387-74.576 73.496 0 0.165 3.58 0.3 7.956 0.3 11.275 0 17.537 1.282 25.247 5.167 7.281 3.669 7.581 3.941 38.476 34.711 31.874 31.745 30.582 30.619 35.156 30.619 4.576 0 3.315 1.097 34.766-30.242 25.072-24.983 29.394-29.127 32.585-31.235 9.397-6.212 16.816-8.515 28.685-8.905l6.973-0.229-34.707-34.728c-39.639-39.661-40.375-40.31-50.165-44.228-8.343-3.339-21.376-4.75-29.465-3.188m-132.96 119.17c-22.985 23.061-24.717 25.009-28 31.487-8.064 15.914-7.489 36.75 1.424 51.581 3.513 5.846 5.903 8.457 27.434 29.967l21.259 21.238 14.014-0.066c15.718-0.075 18.252-0.305 23.688-2.148 7.968-2.702 7.004-1.866 39.936-34.639 29.656-29.512 29.691-29.545 33.008-31.165 7.688-3.752 15.991-3.679 23.555 0.208 2.591 1.332 5.084 3.707 31.718 30.226 38.799 38.63 35.643 36.653 59.18 37.082 7.412 0.135 13.743 0.373 14.067 0.529 1.037 0.497 44.541-43.48 47.617-48.134 12.29-18.593 12.29-41.629 0-60.222-3.076-4.654-46.58-48.631-47.617-48.134-0.324 0.156-6.655 0.394-14.067 0.529-23.546 0.429-20.347-1.579-59.375 37.272-31.324 31.182-30.378 30.345-36.328 32.156-6.843 2.084-14.393 1.077-20.498-2.734-1.139-0.711-14.347-13.542-31.455-30.557-38.871-38.659-35.002-36.436-63.781-36.643l-13.586-0.098-22.193 22.265m140.77 78.966c-1.822 0.552-3.931 2.562-31.445 29.974-31.104 30.988-31.391 31.248-38.672 34.917-7.676 3.868-14.021 5.164-25.293 5.166-4.351 0-7.91 0.136-7.91 0.301 0 1.109 71.167 71.246 74.576 73.496 19.617 12.95 44.668 12.109 63.119-2.119 1.504-1.159 18.353-17.735 37.442-36.835l34.707-34.728-6.973-0.229c-11.871-0.39-19.293-2.694-28.685-8.906-3.191-2.11-7.534-6.274-32.78-31.437-33.585-33.474-31.26-31.666-38.086-29.6" xmlns="http://www.w3.org/2000/svg"/>
        </svg>        
         Pix com Desconto 
        <strong>{{ product.price | times: 0.95 | money }}</strong>
      </p>
    {% endif %}
    <p>ou 6x de <strong style="margin:0;">{{ price | divided_by:6 | money }}</strong></p>
  </div>

  {% if target.unit_price_measurement != null %}
    <small class="unit-price">
      <span class="visually-hidden-price">{{ 'products.product.price.unit_price' | t }}</span>
      <span class="price-item price-item--last">
        <span class="number">
          {%- if theme_st.show_currency_code -%}
            {{- target.unit_price | money_with_currency -}}
          {%- else -%}
            {{- target.unit_price | money -}}
          {%- endif -%}
        </span>
        <span aria-hidden="true">/</span>
        <span class="visually-hidden">&nbsp;{{ 'products.product.price.unit_price_separator' | t }}&nbsp;</span>
        <span class="unit">
          {%- if target.unit_price_measurement.reference_value != 1 -%}
            {{- target.unit_price_measurement.reference_value -}}
          {%- endif -%}
          {{ target.unit_price_measurement.reference_unit }}
        </span>
      </span>
    </small>
  {% endif %}
</div>
